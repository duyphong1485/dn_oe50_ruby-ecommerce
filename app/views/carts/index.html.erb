<% provide(:title, t("cart.cart")) %>
<div class="cart row-user">
  <div class="container cart_height">
    <table id="cart" class="table table-hover table-condensed">
      <thead>
        <tr>
          <th class="cart-name"><%= t "cart.product_name" %></th>
          <th class="cart-price%"><%= t "cart.price" %></th>
          <th class="cart-quantity"><%= t "cart.quantity" %></th>
          <th class="cart-total-money text-center"><%= t "cart.total_money"  %></th>
        </tr>
      </thead>
      <tbody>
        <% @cart_items.reverse! %>
        <% @cart_items.each do |item| %>
          <tr>
            <td>
              <div class="row">
                <div class="col-sm-2 hidden-xs">
                    <%= image_tag item[:product].image, class:"img-responsive width-edit" %>
                </div>
                <div class="col-sm-10">
                  <h4><%= item[:product].name %></h4>
                </div>
              </div>  
            </td>
            <td><%= number_to_currency item[:product].price %></td>
            <%= form_with(url: update_carts_path(item[:product]), local: false, method: :put) do |f| %>
              <td class="quantity">
                <%= f.number_field :quantity, value: item[:quantity], min: 1, class: "form-control text-center change-quatity" %>
                <%= f.hidden_field :id, value: item.dig(:product)&.id %>
              </td>
            <% end %>
            <td data-th="subtotal" class="text-center"><%= number_to_currency line_total_price(item) %></td>
            <td>
              <%= link_to  remove_from_carts_path(item[:product]), class: "btn btn-primary bi bi-trash" do %>
                <%= t ("cart.remove") %>
              <% end %>
            </td>
          </tr>
        <% end %>
      </tbody>
      <tfoot>
        <tr>
          <td>
            <%= link_to t("cart.continue_buy"),home_path, class:"btn btn-info bi bi-bag", type:"button" %>
            
          </td>
          <td colspan="2" class="hidden-xs"> </td>
          <td class="hidden-xs text-center">
            <strong>
              <%= t "cart.total_of_money" %> <%= number_to_currency total_of_money %>
            </strong>
          </td>
          <td >
            <%= link_to t("cart.pay"), home_path, class: "btn btn-success bi bi-wallet2 " %>
          </td>
        </tr>
      </tfoot>
    </table>
  </div>
</div>
<%= javascript_include_tag "ajax_cart" %>
